
.DATA 
DWORD adwPN[1000]
#Arg1:DW adwPN[1000]:A0
#RET:adwPN
.CODE
Func Test2;

Func Test1;

Func FindPN:
PUSHSF
MVI R48, 999
MVI A0,adwPN
MVI A1, Test1
CALL A1
POPSF
RET
ENDF

Func Test1:
MVI R44, 1
MVI R56, 1
MVI R60, 2
Label1:
PUSHSF
LOD R40, A0
ADD R44, R60
MOV R32, R44
MOVI R40, 1
DIV R32, R40

TEST R36, R36
JZ Label1
MVI A1, Test2
CALL A1
TEST R52, R52
JZ Label1
SUB R48, R56
JNZ Label1
POPSF
RET
ENDF

Func Test2:
Label1:
MOV R32, R44
INC A0, R56
LOD R40, A0 
TEST R40, R40
JZ Label2
DIV R32, R40
TEST R36, R36
JZ Label3
JUMP Label1
Label2:
MVI A0, adwPN
MOV R52, R56
    INC A0, R56
Label3:
    RET
ENDF
.MAIN = FindPN
